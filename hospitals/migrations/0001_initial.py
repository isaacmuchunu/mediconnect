# Generated by Django 4.2.11 on 2025-08-21 21:10

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('doctors', '0002_alter_availability_options_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='HospitalCapacity',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('overall_status', models.CharField(choices=[('normal', 'Normal Capacity'), ('busy', 'Busy'), ('critical', 'Critical Capacity'), ('full', 'At Capacity'), ('closed', 'Closed to Admissions'), ('disaster', 'Disaster Mode')], default='normal', max_length=20, verbose_name='Overall Status')),
                ('last_updated', models.DateTimeField(auto_now=True, verbose_name='Last Updated')),
                ('total_beds', models.PositiveIntegerField(default=0, verbose_name='Total Beds')),
                ('occupied_beds', models.PositiveIntegerField(default=0, verbose_name='Occupied Beds')),
                ('available_beds', models.PositiveIntegerField(default=0, verbose_name='Available Beds')),
                ('reserved_beds', models.PositiveIntegerField(default=0, verbose_name='Reserved Beds')),
                ('ed_status', models.CharField(choices=[('normal', 'Normal Capacity'), ('busy', 'Busy'), ('critical', 'Critical Capacity'), ('full', 'At Capacity'), ('closed', 'Closed to Admissions'), ('disaster', 'Disaster Mode')], default='normal', max_length=20, verbose_name='ED Status')),
                ('ed_wait_time_minutes', models.PositiveIntegerField(default=0, verbose_name='ED Wait Time (minutes)')),
                ('ed_patients_waiting', models.PositiveIntegerField(default=0, verbose_name='ED Patients Waiting')),
                ('icu_beds_available', models.PositiveIntegerField(default=0, verbose_name='ICU Beds Available')),
                ('icu_beds_total', models.PositiveIntegerField(default=0, verbose_name='ICU Beds Total')),
                ('or_rooms_available', models.PositiveIntegerField(default=0, verbose_name='OR Rooms Available')),
                ('or_rooms_total', models.PositiveIntegerField(default=0, verbose_name='OR Rooms Total')),
                ('doctors_on_duty', models.PositiveIntegerField(default=0, verbose_name='Doctors on Duty')),
                ('nurses_on_duty', models.PositiveIntegerField(default=0, verbose_name='Nurses on Duty')),
                ('staff_shortage', models.BooleanField(default=False, verbose_name='Staff Shortage')),
                ('ventilators_available', models.PositiveIntegerField(default=0, verbose_name='Ventilators Available')),
                ('ventilators_total', models.PositiveIntegerField(default=0, verbose_name='Ventilators Total')),
                ('ambulance_diversion', models.BooleanField(default=False, verbose_name='Ambulance Diversion')),
                ('diversion_reason', models.TextField(blank=True, verbose_name='Diversion Reason')),
                ('diversion_until', models.DateTimeField(blank=True, null=True, verbose_name='Diversion Until')),
                ('capacity_notes', models.TextField(blank=True, verbose_name='Capacity Notes')),
                ('hospital', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='capacity_status', to='doctors.hospital')),
                ('updated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Hospital Capacity',
                'verbose_name_plural': 'Hospital Capacities',
                'ordering': ['hospital__name'],
            },
        ),
        migrations.CreateModel(
            name='EmergencyDepartmentStatus',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_open', models.BooleanField(default=True, verbose_name='ED Open')),
                ('diversion_status', models.BooleanField(default=False, verbose_name='On Diversion')),
                ('trauma_center_status', models.BooleanField(default=True, verbose_name='Trauma Center Active')),
                ('level_1_wait_minutes', models.PositiveIntegerField(default=0, verbose_name='Level 1 Wait (min)')),
                ('level_2_wait_minutes', models.PositiveIntegerField(default=0, verbose_name='Level 2 Wait (min)')),
                ('level_3_wait_minutes', models.PositiveIntegerField(default=0, verbose_name='Level 3 Wait (min)')),
                ('level_4_wait_minutes', models.PositiveIntegerField(default=0, verbose_name='Level 4 Wait (min)')),
                ('level_5_wait_minutes', models.PositiveIntegerField(default=0, verbose_name='Level 5 Wait (min)')),
                ('patients_waiting', models.PositiveIntegerField(default=0, verbose_name='Patients Waiting')),
                ('patients_in_treatment', models.PositiveIntegerField(default=0, verbose_name='Patients in Treatment')),
                ('patients_admitted_today', models.PositiveIntegerField(default=0, verbose_name='Patients Admitted Today')),
                ('ed_beds_total', models.PositiveIntegerField(default=0, verbose_name='ED Beds Total')),
                ('ed_beds_occupied', models.PositiveIntegerField(default=0, verbose_name='ED Beds Occupied')),
                ('trauma_bays_total', models.PositiveIntegerField(default=0, verbose_name='Trauma Bays Total')),
                ('trauma_bays_occupied', models.PositiveIntegerField(default=0, verbose_name='Trauma Bays Occupied')),
                ('physicians_on_duty', models.PositiveIntegerField(default=0, verbose_name='Physicians on Duty')),
                ('nurses_on_duty', models.PositiveIntegerField(default=0, verbose_name='Nurses on Duty')),
                ('residents_on_duty', models.PositiveIntegerField(default=0, verbose_name='Residents on Duty')),
                ('mass_casualty_alert', models.BooleanField(default=False, verbose_name='Mass Casualty Alert')),
                ('psychiatric_hold_available', models.BooleanField(default=True, verbose_name='Psychiatric Hold Available')),
                ('isolation_rooms_available', models.PositiveIntegerField(default=0, verbose_name='Isolation Rooms Available')),
                ('last_updated', models.DateTimeField(auto_now=True, verbose_name='Last Updated')),
                ('hospital', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='ed_status', to='doctors.hospital')),
                ('updated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Emergency Department Status',
                'verbose_name_plural': 'Emergency Department Statuses',
            },
        ),
        migrations.CreateModel(
            name='SpecialtyUnitStatus',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('unit_type', models.CharField(choices=[('icu', 'Intensive Care Unit'), ('ccu', 'Cardiac Care Unit'), ('nicu', 'Neonatal ICU'), ('picu', 'Pediatric ICU'), ('or', 'Operating Rooms'), ('cath_lab', 'Cardiac Catheterization Lab'), ('dialysis', 'Dialysis Unit'), ('oncology', 'Oncology Unit'), ('maternity', 'Maternity Ward'), ('psychiatric', 'Psychiatric Unit'), ('burn', 'Burn Unit'), ('stroke', 'Stroke Unit')], max_length=20, verbose_name='Unit Type')),
                ('unit_name', models.CharField(max_length=100, verbose_name='Unit Name')),
                ('total_capacity', models.PositiveIntegerField(default=0, verbose_name='Total Capacity')),
                ('current_occupancy', models.PositiveIntegerField(default=0, verbose_name='Current Occupancy')),
                ('available_capacity', models.PositiveIntegerField(default=0, verbose_name='Available Capacity')),
                ('is_operational', models.BooleanField(default=True, verbose_name='Operational')),
                ('accepting_patients', models.BooleanField(default=True, verbose_name='Accepting Patients')),
                ('required_staff_ratio', models.FloatField(default=1.0, verbose_name='Required Staff Ratio')),
                ('current_staff_count', models.PositiveIntegerField(default=0, verbose_name='Current Staff Count')),
                ('is_adequately_staffed', models.BooleanField(default=True, verbose_name='Adequately Staffed')),
                ('critical_equipment_available', models.BooleanField(default=True, verbose_name='Critical Equipment Available')),
                ('equipment_notes', models.TextField(blank=True, verbose_name='Equipment Notes')),
                ('average_wait_time_minutes', models.PositiveIntegerField(default=0, verbose_name='Average Wait Time (min)')),
                ('last_updated', models.DateTimeField(auto_now=True, verbose_name='Last Updated')),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='specialty_units', to='doctors.hospital')),
            ],
            options={
                'verbose_name': 'Specialty Unit Status',
                'verbose_name_plural': 'Specialty Unit Statuses',
                'ordering': ['hospital', 'unit_type', 'unit_name'],
                'unique_together': {('hospital', 'unit_type', 'unit_name')},
            },
        ),
        migrations.CreateModel(
            name='HospitalAlert',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('alert_type', models.CharField(choices=[('capacity', 'Capacity Alert'), ('diversion', 'Ambulance Diversion'), ('emergency', 'Emergency Situation'), ('staffing', 'Staffing Issue'), ('equipment', 'Equipment Failure'), ('system', 'System Alert'), ('weather', 'Weather Alert'), ('security', 'Security Alert')], max_length=20, verbose_name='Alert Type')),
                ('severity', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('critical', 'Critical')], max_length=20, verbose_name='Severity')),
                ('title', models.CharField(max_length=200, verbose_name='Alert Title')),
                ('message', models.TextField(verbose_name='Alert Message')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('acknowledged', models.BooleanField(default=False, verbose_name='Acknowledged')),
                ('resolved', models.BooleanField(default=False, verbose_name='Resolved')),
                ('alert_start', models.DateTimeField(auto_now_add=True, verbose_name='Alert Start')),
                ('alert_end', models.DateTimeField(blank=True, null=True, verbose_name='Alert End')),
                ('acknowledged_at', models.DateTimeField(blank=True, null=True, verbose_name='Acknowledged At')),
                ('resolved_at', models.DateTimeField(blank=True, null=True, verbose_name='Resolved At')),
                ('acknowledged_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='acknowledged_alerts', to=settings.AUTH_USER_MODEL, verbose_name='Acknowledged By')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_alerts', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='alerts', to='doctors.hospital')),
                ('resolved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='resolved_alerts', to=settings.AUTH_USER_MODEL, verbose_name='Resolved By')),
            ],
            options={
                'verbose_name': 'Hospital Alert',
                'verbose_name_plural': 'Hospital Alerts',
                'ordering': ['-alert_start', '-severity'],
                'indexes': [models.Index(fields=['hospital', 'is_active'], name='hospitals_h_hospita_25358e_idx'), models.Index(fields=['alert_type', 'severity'], name='hospitals_h_alert_t_054b1e_idx')],
            },
        ),
        migrations.CreateModel(
            name='BedManagement',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('bed_number', models.CharField(max_length=20, verbose_name='Bed Number')),
                ('bed_type', models.CharField(choices=[('general', 'General Ward'), ('icu', 'Intensive Care Unit'), ('ccu', 'Cardiac Care Unit'), ('nicu', 'Neonatal ICU'), ('picu', 'Pediatric ICU'), ('or', 'Operating Room'), ('er', 'Emergency Room'), ('maternity', 'Maternity'), ('isolation', 'Isolation'), ('psychiatric', 'Psychiatric')], max_length=20, verbose_name='Bed Type')),
                ('ward_name', models.CharField(max_length=100, verbose_name='Ward Name')),
                ('room_number', models.CharField(blank=True, max_length=20, verbose_name='Room Number')),
                ('status', models.CharField(choices=[('available', 'Available'), ('occupied', 'Occupied'), ('reserved', 'Reserved'), ('maintenance', 'Under Maintenance'), ('cleaning', 'Being Cleaned'), ('blocked', 'Blocked')], default='available', max_length=20, verbose_name='Status')),
                ('last_status_change', models.DateTimeField(auto_now=True, verbose_name='Last Status Change')),
                ('patient_name', models.CharField(blank=True, max_length=100, verbose_name='Patient Name')),
                ('patient_id', models.CharField(blank=True, max_length=50, verbose_name='Patient ID')),
                ('admission_date', models.DateTimeField(blank=True, null=True, verbose_name='Admission Date')),
                ('expected_discharge', models.DateTimeField(blank=True, null=True, verbose_name='Expected Discharge')),
                ('has_ventilator', models.BooleanField(default=False, verbose_name='Has Ventilator')),
                ('has_monitor', models.BooleanField(default=False, verbose_name='Has Monitor')),
                ('has_oxygen', models.BooleanField(default=False, verbose_name='Has Oxygen')),
                ('last_cleaned', models.DateTimeField(blank=True, null=True, verbose_name='Last Cleaned')),
                ('maintenance_notes', models.TextField(blank=True, verbose_name='Maintenance Notes')),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='beds', to='doctors.hospital')),
            ],
            options={
                'verbose_name': 'Bed Management',
                'verbose_name_plural': 'Bed Management',
                'ordering': ['hospital', 'ward_name', 'bed_number'],
                'indexes': [models.Index(fields=['hospital', 'status'], name='hospitals_b_hospita_37ad8e_idx'), models.Index(fields=['bed_type', 'status'], name='hospitals_b_bed_typ_08c340_idx')],
                'unique_together': {('hospital', 'bed_number')},
            },
        ),
    ]
